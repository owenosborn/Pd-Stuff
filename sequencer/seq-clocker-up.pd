#N canvas 6 50 965 592 10;
#N canvas 5 50 1241 632 clock-control 0;
#X obj 15 63 inlet;
#X obj 297 57 inlet;
#X obj 400 57 inlet;
#X obj 188 432 outlet;
#X obj 516 55 inlet;
#X text 343 58 stop;
#X text 446 58 start;
#X obj 403 442 outlet;
#X text 248 433 beat clock out;
#X text 558 57 start on next beat;
#X text 57 60 beat clock in;
#X obj 298 98 bang;
#X obj 398 89 bang;
#X obj 516 85 bang;
#X msg 299 124 0;
#X obj 414 124 t b b;
#X obj 423 322 t b b;
#N canvas 501 273 450 300 wait-for-next-beat 0;
#X obj 109 71 inlet;
#X obj 211 67 inlet;
#X obj 118 215 outlet;
#X obj 114 137 == 1;
#X obj 114 115 i 0;
#X obj 114 162 sel 1;
#X obj 114 184 t b b;
#X msg 166 152 0;
#X msg 203 92 1;
#X connect 0 0 4 0;
#X connect 1 0 8 0;
#X connect 3 0 5 0;
#X connect 4 0 3 0;
#X connect 5 0 6 0;
#X connect 6 0 2 0;
#X connect 6 1 7 0;
#X connect 7 0 4 1;
#X connect 8 0 4 1;
#X restore 386 297 pd wait-for-next-beat;
#X msg 467 360 1;
#X msg 445 156 1;
#X obj 773 437 outlet;
#X text 833 436 spigot control;
#X text 460 443 seq clock start;
#X obj 40 98 t f f;
#X obj 169 179 <;
#X obj 169 205 sel 1;
#X obj 172 144 t f f;
#X text 212 187 bang on next rollover \, top of beat;
#X connect 0 0 23 0;
#X connect 1 0 11 0;
#X connect 2 0 12 0;
#X connect 4 0 13 0;
#X connect 11 0 14 0;
#X connect 12 0 15 0;
#X connect 13 0 17 1;
#X connect 14 0 20 0;
#X connect 15 0 7 0;
#X connect 15 1 19 0;
#X connect 16 0 7 0;
#X connect 16 1 18 0;
#X connect 17 0 16 0;
#X connect 18 0 20 0;
#X connect 19 0 20 0;
#X connect 23 0 3 0;
#X connect 23 1 26 0;
#X connect 24 0 25 0;
#X connect 25 0 17 0;
#X connect 26 0 24 1;
#X connect 26 1 24 0;
#X restore 211 199 pd clock-control;
#X text 284 22 start;
#X text 347 19 start on next beat;
#X obj 236 342 spigot;
#N canvas 221 50 1022 654 clocker 1;
#X obj 312 332 wrap;
#X floatatom 339 413 5 0 0 0 - - -, f 5;
#X obj 458 134 t b b;
#X obj 453 82 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 312 310 - 0;
#X obj 314 215 f;
#X obj 312 355 t f f;
#X obj 312 593 outlet;
#X obj 310 511 + 1;
#X obj 453 53 inlet;
#X obj 290 58 inlet;
#X text 44 307 derive an internal beat clock from the master by offsetting
phase., f 34;
#X obj 312 438 + 0;
#N canvas 0 50 450 300 wait-for-next-tick 0;
#X obj 109 71 inlet;
#X obj 211 67 inlet;
#X obj 118 215 outlet;
#X obj 114 137 == 1;
#X obj 114 115 i 0;
#X obj 114 162 sel 1;
#X obj 114 184 t b b;
#X msg 166 152 0;
#X msg 203 92 1;
#X connect 0 0 4 0;
#X connect 1 0 8 0;
#X connect 3 0 5 0;
#X connect 4 0 3 0;
#X connect 5 0 6 0;
#X connect 6 0 2 0;
#X connect 6 1 7 0;
#X connect 7 0 4 1;
#X connect 8 0 4 1;
#X restore 313 176 pd wait-for-next-tick;
#X text 503 50 start;
#X obj 312 467 t f f;
#N canvas 80 99 660 336 count-beats 0;
#X obj 175 216 + 1;
#X msg 230 99 0;
#X obj 126 152 <;
#X obj 126 178 sel 1;
#X obj 129 117 t f f;
#X obj 141 219 i 1;
#X text 225 151 when current value is lees than previous value the
phasor rolled over and we increment the beat count.;
#X obj 125 47 inlet;
#X obj 136 269 outlet;
#X obj 303 37 inlet;
#X text 171 44 beat clock in;
#X text 348 38 reset;
#X text 184 271 count;
#X connect 0 0 5 1;
#X connect 1 0 2 1;
#X connect 1 0 5 0;
#X connect 2 0 3 0;
#X connect 3 0 5 0;
#X connect 4 0 2 1;
#X connect 4 1 2 0;
#X connect 5 0 0 0;
#X connect 5 0 8 0;
#X connect 7 0 4 0;
#X connect 9 0 1 0;
#X restore 339 387 pd count-beats;
#X text 443 366 when phasor is reset from a start condition or rollover
\, reset beat counter., f 25;
#X text 335 61 beat clock;
#X text 87 461 add beat count to beat phase;
#X text 555 59 when we start the sequence we want the first output
to be 1 (top of first beat) \, so we wait for next tick.;
#X text 214 604 seq clock out;
#X text 8 56 this patch takes a 0-1 beat phase clock input and outputs
a sequence clock of arbitrary length that is syncrhonized to the input
clock., f 38;
#X text 9 160, f 38;
#X text 9 120 this version just counts up., f 38;
#X obj 291 106 t f b f;
#X connect 0 0 6 0;
#X connect 1 0 12 1;
#X connect 2 0 13 1;
#X connect 2 1 16 1;
#X connect 3 0 2 0;
#X connect 4 0 0 0;
#X connect 5 0 4 1;
#X connect 6 0 12 0;
#X connect 6 1 16 0;
#X connect 8 0 7 0;
#X connect 9 0 3 0;
#X connect 10 0 25 0;
#X connect 12 0 15 0;
#X connect 13 0 5 0;
#X connect 15 0 8 0;
#X connect 16 0 1 0;
#X connect 25 0 4 0;
#X connect 25 1 13 0;
#X connect 25 2 5 1;
#X restore 211 281 pd clocker;
#X obj 323 464 outlet;
#X obj 75 42 inlet;
#X obj 257 238 t b b;
#X obj 234 457 outlet;
#X text 180 491 seq clock out;
#X text 312 490 seq starting;
#X text 115 44 beat clock;
#X obj 228 50 inlet;
#X obj 284 48 inlet;
#X obj 368 46 inlet;
#X text 221 23 stop;
#X text 352 280 this clocker just counts up \, doesn't loop;
#X connect 0 0 4 0;
#X connect 0 1 7 0;
#X connect 0 2 3 1;
#X connect 3 0 8 0;
#X connect 4 0 3 0;
#X connect 6 0 0 0;
#X connect 7 0 4 1;
#X connect 7 1 5 0;
#X connect 12 0 0 1;
#X connect 13 0 0 2;
#X connect 14 0 0 3;
